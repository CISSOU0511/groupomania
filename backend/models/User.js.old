/*modèle de données*/
/*middleware*/
/*const mysql = require('./db')
/*plugin*/

const { Sequelize, DataTypes } = require('sequelize');

const sequelize = new Sequelize('groupomania', 'root', '', {
    host:process.env.HOST,
    dialect: 'mysql'
});

const User = sequelize.define('users', {
    ID: {
        type: DataTypes.INTEGER,
        allowNull: false,
        autoIncrement: true,
        primaryKey: true
    },
    NOM: {
        type: DataTypes.STRING,
        allowNull: false
    },
    PRENOM: {
        type: DataTypes.STRING,
        allowNull: false
    },
    EMAIL: {
        type: DataTypes.STRING,
        allowNull: false,
        unique: true
    },
    PASSWORD: {
        type: DataTypes.STRING,
        allowNull: false
    },
    createdAt: {
        type: DataTypes.DATE,
        allowNull: false,
        defaultValue: Sequelize.NOW

    },
    updatedAt: {
        type: DataTypes.DATE,
        allowNull: false,
        defaultValue: Sequelize.NOW
    }
},
);

User.sync().then(() => {
 const user = User.build({ NOM: 'cecile', PRENOM: 'gaubert', EMAIL: 'primaelswann@gamil.com', PASSWORD: 'CG0511ps.'});
 return user.save();
}) .then((data) => {

}).catch((err) =>{
    console.log(err);
});


/*
exports.findOne = function (email) {
    return new Promise((resolve,reject ) => {        
        mysql.query('SELECT * FROM `utilisateurs` WHERE email= ? ', [email], function (error, result, fields) {
            if (error) return reject(error)
            resolve(result)
        })
    })
};*/